<div class="portlet light" style="width: 100%;height:100%;overflow-x: hidden;">
    <div class="portlet-title">
        <div class="caption">
            <span class="caption-subject font-green-sharp bold uppercase">{{title}}</span>
        </div>
        <div class="tools">
            <a href="javascript:;" class="remove" ng-click="cancel()">
            </a>
        </div>
    </div>
    <div class="portlet-body portlet light">
        <form action="#" name="myform" class="form-horizontal">
            <div class="form-body ">
                <div class="col-md-12" style="margin-bottom:10px;">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 实体类型:<span ng-class="{required:myform.fromtable.$invalid}"  > * </span></label>
                        <div class="col-md-8" style="margin-top:7px;">
                            <div class="col-md-2">
                                <input type="radio" required   name="fromtable"    ng-model="dataEnt.entityType" ng-checked ="dataEnt.entityType=='table'" ng-disabled="!editflag"  value="table" />表
                            </div>
                            <div class="col-md-2">
                                <input type="radio" required  name="fromtable"  ng-model="dataEnt.entityType"  ng-checked ="dataEnt.entityType=='view'"   value="view"  ng-disabled="!editflag"/>视图
                            </div>
                            <div class="col-md-2" >
                                <input type="radio" required  name="fromtable" ng-model="dataEnt.entityType"  ng-checked ="dataEnt.entityType=='query'"  value="query" ng-disabled="!editflag"  />查询实体
                            </div>
                            <div class="col-md-2" >
                                <input type="radio" required  name="fromtable"  ng-model="dataEnt.entityType"  ng-checked ="dataEnt.entityType=='cache'"  value="cache" ng-disabled="!editflag"/>内存对象
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" >
                    <div class="form-group">
                        <label class="control-label col-md-4">隶属应用:<span ng-class="{required:myform.guidApp.$invalid}"  > * </span></label>
                            <div class="col-md-8" ng-init="$settings.getCommData('APP')">
                                <select class="form-control"  name="guidApp"  ng-disabled="!editflag"  required  ng-model="dataEnt.guidApp">
                                    <!-- 渲染，不能绑定同一个，不然每次点击，都会改变，重新渲染，所以ng-model绑定和渲染必须不同-->
                                    <option ng-repeat="d in $settings.commlist['APP'] track by $index" value="{{d.guid}}">{{d.appName}}</option>
                                </select>
                            </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4">实体名称<span ng-class="{required:myform.entityName.$invalid}"  > * </span></label>
                        <div class="col-md-8">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.entityName"
                                   name="entityName" required/>
                        </div>
                    </div>
                </div>
                <div class="col-md-6" ng-if="dataEnt.entityType=='table'">
                    <div class="form-group">
                        <label class="control-label col-md-4">数据库表名:</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.tableName"
                                   name="id" />
                        </div>
                    </div>
                </div>
                <div class="col-md-6" ng-if="dataEnt.entityType=='view'">
                    <div class="form-group">
                        <label class="control-label col-md-4">视图名:</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.tableName"
                                   name="id" />
                        </div>
                    </div>
                </div>
                <div class="col-md-6" ng-if="dataEnt.entityType=='query'">
                    <div class="form-group">
                        <label class="control-label col-md-4">查询实体名:</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.tableName"
                                   name="id" />
                        </div>
                    </div>
                </div>
                <div class="col-md-6" ng-if="dataEnt.entityType=='cache'">
                    <div class="form-group">
                        <label class="control-label col-md-4">内存对象:</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.tableName"
                                   name="id" />
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 是否可增加:<span ng-class="{required:myform.isAdd.$invalid}"  > * </span></label>
                        <div class="col-md-8" ng-init="$settings.getDictData('DICT_YON')">
                            <select class="form-control"   required   ng-model="dataEnt.isadd" name="isAdd">
                                <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 是否可删除:<span ng-class="{required:myform.idDel.$invalid}"  > * </span></label>
                        <div class="col-md-8" ng-init="$settings.getDictData('DICT_YON')">
                            <select class="form-control"   required   ng-model="dataEnt.isdel" name="idDel">
                                <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 是否可修改:<span ng-class="{required:myform.isModief.$invalid}"  > * </span></label>
                        <div class="col-md-8" ng-init="$settings.getDictData('DICT_YON')">
                            <select class="form-control"   required   ng-model="dataEnt.ismodify" name="isModief">
                                <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 是否可查看:<span ng-class="{required:myform.isview.$invalid}"  > * </span></label>
                        <div class="col-md-8" ng-init="$settings.getDictData('DICT_YON')">
                            <select class="form-control"   required   ng-model="dataEnt.isview" name="isview">
                                <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label class="control-label col-md-4"> 是否需要分页:<span ng-class="{required:myform.isPage.$invalid}"  > * </span></label>
                        <div class="col-md-8" ng-init="$settings.getDictData('DICT_YON')">
                            <select class="form-control"   required   ng-model="dataEnt.ispage" name="isPage">
                                <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label col-md-2">实体描述:</label>
                        <div class="col-md-10">
                            <input type="text" class="form-control"
                                   ng-model="dataEnt.entityDesc"
                                   name="id" />
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label col-md-2"></label>
                        <div class="col-md-10">
                            <!--因为无法监控到数组，所以使用angular 的管道，在filter.js中定义tdCondStr来处理函数-->
                            <textarea class="form-control" readonly>{{qualityRatingExt | toCondStr}}</textarea>
                        </div>
                    </div>
                </div>
                <div class="col-md-12" style="height: 200px;overflow: auto">
                    <div class="form-group">
                        <label class="control-label col-md-3">删除记录检查引用关系</label>
                        <div class="col-md-9">
                            <div class="form">
                                <!-- BEGIN FORM-->
                                <form action="#" name=`"myform" class="form-horizontal">
                                    <div class="form-body">
                                        <table class="table table-hover">
                                            <tbody>
                                            <tr>
                                                <td ng-form="subform" width="25%">表名</td>
                                                <td ng-form="subform" width="25%">字段名</td>
                                                <td ng-form="subform" width="15%">关系值</td>
                                            </tr>
                                            <tr  ng-repeat="d in qualityRatingExt track by $index"  >
                                                <td ng-form="subform" width="25%"><input ng-model="d.tableName" type="text"  class="form-control {{subform.$invalid&&'lanmo-warning'}}"/></td>
                                                <td ng-form="subform" width="25%"><input ng-model="d.columeName" type="text"  class="form-control {{subform.$invalid&&'lanmo-warning'}}"/></td>
                                                <td ng-form="subform" width="15%" ng-init="$settings.getDictData('DICT_YON')">
                                                        <select class="form-control"      ng-model="d.isDel" name="isview">
                                                            <option ng-repeat="d in $settings.diclist['DICT_YON'] track by $index" value="{{d.sendValue}}">{{d.itemName}}</option>
                                                        </select>
                                                </td>
                                                <td width="25%">
                                                    <a href ng-click="addQualityRatingExt()" class="btn btn-icon-only green"><i class="fa fa-plus"></i></a>
                                                    <a ng-if="qualityRatingExt.length>1" href ng-click="delQualityRatingExt($index)" class="btn btn-icon-only green"><i class="fa fa-minus"></i></a>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </form>
                                <!-- END FORM-->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="form-group">
                        <label class="control-label col-md-2"></label>
                        <div class="col-md-10">
                            <div class="actions btn-set" style="float: right;">
                                <button type="button" name="back"  class="btn btn-primary" ng-if="myform.$invalid == false"  ng-disabled="myform.$invalid" popover-trigger="mouseenter" ng-click="add(dataEnt)" > 保存
                                </button>
                                <button type="button" name="back" class="btn default" ng-if="myform.$invalid == true"  ng-disabled="myform.$invalid" popover-trigger="mouseenter" > 保存
                                </button>
                                <button type="button" name="back" class="btn btn-danger" ng-click="cancel()"> 取消
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>